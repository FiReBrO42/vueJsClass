import{_ as d,o as p,c as m,a as s,B as l,C as c,z as u,D as h,F as f}from"./index-79325600.js";const _="https://vue3-course-api.hexschool.io",g={data(){return{user:{username:"",password:""},uploadImages:""}},methods:{sigin(){const t=`${_}/v2/admin/signin`;this.$http.post(t,this.user).then(e=>{const{token:n,expired:r}=e.data;document.cookie=`firebro42=${n}; expires=${new Date(r)}`,console.log(e)}).catch(e=>{console.log(e)})},upload(t){const e=t.target.files[0],n=e.name.substring(e.name.lastIndexOf(".")+1);if(n!=="jpg"&&n!=="JPG"&&n!=="png"){alert("上傳檔案只能是 jpg、png 格式!，請注意格式上傳呦");return}const r=new FormData;r.append("file-to-upload",e),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/firebro42/admin/upload",r).then(o=>{this.uploadImages=o.data.imageUrl,alert("圖片上傳成功")}).catch(o=>{alert(o.response.data.message)})}},mounted(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)firebro42\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t}},b={class:"container"},w={class:"row justify-content-center"},v=s("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),x={class:"col-8"},k={id:"form",class:"form-signin"},y={class:"form-floating mb-3"},D=s("label",{for:"username"},"Email address",-1),I={class:"form-floating"},B=s("label",{for:"password"},"Password",-1),j=s("p",{class:"mt-5 mb-3 text-muted"},"© 2021~∞ - 六角學院",-1),V={class:"container mt-4"},$=s("h1",{class:"text-center"},"後台 | Backstage",-1),C=s("h2",null,"圖片上傳區",-1),F=s("label",{for:"file",class:"mb-2"},"圖片檔案僅接受 jpg、png 格式，感謝配合～",-1),P=["href"],U=["src"],q={class:"break-word"};function z(t,e,n,r,o,i){return p(),m(f,null,[s("div",b,[s("div",w,[v,s("div",x,[s("form",k,[s("div",y,[l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.user.username=a),type:"email",class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[c,o.user.username]]),D]),s("div",I,[l(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.user.password=a),type:"password",class:"form-control",id:"password",placeholder:"Password",required:""},null,512),[[c,o.user.password]]),B]),s("button",{onClick:e[2]||(e[2]=u(a=>i.sigin(),["prevent"])),class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ")])])]),j]),s("div",V,[$,C,F,s("input",{type:"file",class:"form-control mb-2",id:"file",placeholder:"請輸入圖片連結",onChange:e[3]||(e[3]=(...a)=>i.upload&&i.upload(...a))},null,32),s("a",{href:o.uploadImages,target:"_blank"},"上傳的圖片連結",8,P),s("img",{src:o.uploadImages,class:"img-fluid",alt:""},null,8,U),s("p",q,h(o.uploadImages),1)])],64)}const M=d(g,[["render",z]]);export{M as default};
